<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Cambio tabla Mujeres - CIM</title>
        <link rel="stylesheet" href="css/women_changes.css">
        <script src="js/header.js"></script>
        <script src="js/libraries/sweetalert.js"></script>
        <script src="js/log_verification.js"></script>
        <script src="js/women_data.js"></script>
    </head>
    <body>
        <div class="container">
            <button class="btn btn-link" onclick="window.location.href='main.html'"><- Volver</button>
            <h3 id="h3_pag">Página </h3>

            <!-- Buscador y filtrar -->
            <div id="buscar-filtrar">
                <select class="form-select" id="tipoBusqueda" onchange="tipoBusqueda(this.value)">
                    <option selected value="1">Nombre y apellidos</option>
                    <option value="2">Dni</option>
                    <option value="3">Fecha de nacimiento</option>
                    <option value="4">Dirección</option>
                    <option value="5">Número de expediente</option>
                </select>
                <input type="text" class="form-control" id="busqueda" placeholder="Introduce el nombre o apellidos por el que quieres buscar" />
                <button class="btn btn-outline-success" id="buscar">Buscar</button>
                <select class="form-select" id="filtrar" onchange="filtrado(this.value)">
                    <option disabled selected value="0">Opción de filtrado</option>
                    <option value="1">Nombre</option>
                    <option value="2">Apellidos</option>
                    <option value="3">Dni</option>
                    <option value="4">Fecha de nacimiento</option>
                    <option value="5">Dirección</option>
                    <option value="6">Número de expediente</option>
                </select>
            </div>

            <script>
                //Evento en el que cuando se pulsa el botón de buscar, se manda al women_search lo que se busca
                document.getElementById('buscar').addEventListener('click', function() {
                    const search = document.getElementById('busqueda').value;
                    const tipoBusqueda = document.getElementById('tipoBusqueda').value;
                    //console.log("Búsqueda: ", search);
                    window.location.href = 'women_search.html?search=' + search + "&page=0" + "&tipoBusqueda=" + tipoBusqueda;
                });

                function tipoBusqueda(tipoBusqueda) {
                    var busquedaInput = document.getElementById('busqueda');

                    if (tipoBusqueda == 2) {
                        busquedaInput.type = 'tel';
                        busquedaInput.placeholder = 'Introduce el DNI';
                        busquedaInput.maxLength = 9;
                        busquedaInput.pattern = '\\d{8}[a-zA-Z]';
                        busquedaInput.title = 'Por favor, introduce un DNI válido (8 números seguidos de una letra)';
                    } else if (tipoBusqueda == 3) {
                        busquedaInput.type = 'Date';
                        console.log("Hola");
                    } else if (tipoBusqueda == 5) {
                        busquedaInput.type = 'text';
                        busquedaInput.placeholder = 'Introduce número de expediente (ej. 55/55)';
                        busquedaInput.pattern = '\\d{2}/\\d{2}';
                        busquedaInput.title = 'Por favor, introduce la fecha en formato DD/MM';
                        // Añadir un evento de escucha para rechazar letras
                        busquedaInput.addEventListener('input', function(event) {
                            // Reemplazar cualquier carácter no numérico con una cadena vacía
                            this.value = this.value.replace(/[^0-9/]/g, '');
                        });
                    }
                    console.log(tipoBusqueda);
                }
            </script>
            
            <table id="women_table" class="table table-hover table-success" style="border: 1px solid black">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Apellidos</th>
                        <th>Dni</th>
                        <th>Fecha de nacimiento</th>
                        <th>Dirección</th>
                        <th>Número de expediente</th>
                        <th>Editar</th>
                        <th>Borrar</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="container" id="paginacion"></div>
    </body>
</html>